<{css app="topshop" src="huimin/login.css"}>
<body>
    <div class="pc-gd-container">
        <div class="container">
            <div class="logo"><{img src="huimin/logo.png" app="topshop"}></div>
            <form action="<{url action=topshop_ctl_passport@huiminSupplierLogin}>" method="post" class="bg-white" role="form" data-validate-onsuccess="ajaxSubmit">

                <div class="login">
                    <div class="name"><{img src="huimin/name.png" app="topshop"}></div>
                    <div class="username form-group"><input type="text" name="login_account" id="userid" class="form-control" placeholder="注册账号必填，最少4个字符 不能纯数字或中文" required maxlength="20" data-validate-length-min="4" pattern="^(?!\d+$)[^\u4e00-\u9fa5]*$" data-validate-regexp-message="不能用纯数字或中文"></div>
                    <div class="password form-group"><input type="password" name="login_password" id="login_password" class="form-control" placeholder="密码，6-20个字符，不能纯数字、字母" required maxlength="20" data-validate-length-min="6" pattern="^(?!\d+$|[a-zA-Z]+$)[^\u4e00-\u9fa5]*$" data-validate-regexp-message="不能纯数字、字母"></div>
                    <button class="loginIn">登录</button>
                    <div type="submit" class="register"><a href="<{url action=topshop_ctl_passport@huiminSupplierRegisterPage}>">没有账户,去注册</a></div>
                </div>
            </form>

        </div>
    </div>
</body>
<script>
    function ajaxSubmit(e) {
        var form = e.target;
        e.preventDefault();
        $.post(form.action, $(form).serialize(), function(rs) {
            if(rs.error) {
                $('#messagebox').message(rs.message);
                return;
            }
            if(rs.success) {
                $('#messagebox').message(rs.message, 'success');
            }
            if(rs.redirect) {
                setTimeout(function(){location.href=rs.redirect;}, 1000);
            }
        });
    }
</script>