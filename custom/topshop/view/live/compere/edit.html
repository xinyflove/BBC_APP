  <form  action="<{url action=topshop_ctl_live_compere@save}>" method="post" class="form-horizontal" data-validate-onsuccess="ajaxSubmit" id="form_delivery" role="form">
    <input type="hidden" name="id" value="<{$id}>">
	<div class="panel panel-default">
		<div class="panel-heading">主播基本信息</div>
		 <div class="panel-body">
		  <div class="form-group">
			<label for="" class="col-sm-1 control-label">名称：</label>
			<div class="col-sm-4">
			  <input type="text" name="compere_name" required placeholder="主播名字" value="<{$compere_name}>" class="form-control">
			</div>
		  </div>
		</div>
		 <div class="panel-body">
		  <div class="form-group">
			<label for="" class="col-sm-1 control-label">头像：</label>
			<div class="col-sm-4">
				  <div class="pad" style="overflow:hidden;">
				  <a class="select-image center-block logo_block" data-toggle="modal" href="<{url action=topshop_ctl_shop_image@loadImageModal}>" data-target="#gallery_modal">
					<input type="hidden" name="avatar" value="<{$avatar}>">
					<div class="img-put">
					  <img src="<{$avatar|storager}>">
					  <i class="glyphicon glyphicon-picture"></i>
					</div>
				  </a>
				 </div>
			</div>
			<span class="help-block">头像尺寸标准：270px*250 px。</span>
		  </div>
		</div>
		 <div class="panel-body">
		  <div class="form-group">
			<label for="" class="col-sm-1 control-label">排序：</label>
			<div class="col-sm-4">
			  <input type="text" name="compere_sort" required placeholder="主播排序" value="<{$sort}>" class="form-control">
			</div>
			<span class="help-block">主播按数字大小排序,数字越小越靠前,不能使用负数进行排序</span>
		  </div>
		</div>
		 <div class="panel-body">
		  <div class="form-group">
			<label for="" class="col-sm-1 control-label">简介/描述：</label>
			<div class="col-sm-4">
			  <textarea class="form-control" name="describe"><{$describe}></textarea>
			</div>
		  </div>
		</div>
	</div>

	  <!--add_2018/6/15_by_wanghaichao_start-->
      <!--<div class="form-group commission">
        <label class="col-sm-2 control-label rate-title" >头像：</label>
        <div class="col-sm-3">
            <div class="pad" style="overflow:hidden;">
              <a class="select-image center-block logo_block" data-toggle="modal" href="<{url action=topshop_ctl_shop_image@loadImageModal}>" data-target="#gallery_modal">
                <input type="hidden" name="avatar" value="<{$avatar}>">
                <div class="img-put">
                  <img src="<{$avatar|storager}>">
                  <i class="glyphicon glyphicon-picture"></i>
                </div>
              </a>
            </div>
        </div>
		<!--<span class="label label-danger rate-desc">佣金比例请填写小于100的正数,例如填写10,那么分佣比例就为10%</span>-->
     <!-- </div>
	  <!--add_2018/6/15_by_wanghaichao_end-->

      <!--<div class="form-group commission">
        <label class="col-sm-2 control-label rate-title" >排序：</label>
        <div class="col-sm-3">
          <input class="form-control" type="text" name="sort" value="<{$sort}>">
        </div>
		<!--<span class="label label-danger rate-desc">佣金比例请填写小于100的正数,例如填写10,那么分佣比例就为10%</span>-->
     <!-- </div>

      <div class="form-group commission">
        <label class="col-sm-2 control-label rate-title" >简介/描述：</label>
        <div class="col-sm-3">
		  <textarea class="form-control" name="describe"><{$describe}></textarea>
          <!--<input class="form-control" type="text" name="sort" value="<{$sort}>">-->
        <!--</div>
		<!--<span class="label label-danger rate-desc">佣金比例请填写小于100的正数,例如填写10,那么分佣比例就为10%</span>-->
      <!--</div>-->

	<div class="panel panel-default select-goods-panel">
		<div class="panel-heading">
		  选择主播推荐商品
		</div>
		<div class="panel-body">
		  <button class="btn btn-md btn-block btn-danger select-goods" data-remote="<{url action=topshop_ctl_selector_item@loadSelectGoodsModal}>" data-item_id="<{$notEndItem}>" data-item_sort='<{$item_sort}>' data-textcol="title,price" data-sort=true data-is_select_sku=false data-target="#goods_modal" data-fetchgoods="<{url action=topshop_ctl_selector_item@formatSelectedGoodsRow}>">选择商品</button>
		  <div class="selected-goods-list">
		  </div>
		</div>
	</div>
	  <div class="row">
		<div class="col-md-4">

		</div>
		<div class="col-md-2">
		  <button type="submit" class="btn btn-primary btn-lg btn-block action-save">保存</button>
		</div>
		<div class="col-md-2">
		   <a href="<{url action="topshop_ctl_live_compere@index"}>"><button type="button" class="btn btn-default btn-lg btn-block action-cancel">取消</button></a>
		</div>
		<div class="col-md-4">

		</div>
	  </div>
  </form>
<script>
  var all = $('.check-item');
  $('#check_all').click(function(){
    if($(this).prop('checked')==true){
      $('.check-this-inline').prop('checked',true);
      all.prop('checked',true);
    }else{
      $('.check-this-inline').prop('checked',false);
      all.prop('checked',false);
    }
  })

  all.click(function() {
    if(!$(this).hasClass('check-all') && !$(this).hasClass('check-this-inline')){
      $('#check_all').prop('checked',false);
      $(this).parent().parent().find('.check-this-inline').prop('checked', false);
    }else if($(this).hasClass('check-this-inline')){
      $('#check_all').prop('checked',false);
    }
  });

  $('.check-this-inline').click(function(){
    if($(this).prop('checked')==true){
      $(this).parent().siblings().find('input[type="checkbox"]').prop('checked',true);
    }else{
      $(this).parent().siblings().find('input[type="checkbox"]').prop('checked',false);
    }
  })

  function ajaxSubmit (e) {
    var form = e.target;
    e.preventDefault();
    $.post(form.action, $(form).serialize(), function(rs) {
      if(rs.error) {
        $('#messagebox').message(rs.message);
        return;
      }
      if(rs.success) {
        $('#messagebox').message(rs.message, 'success');
      }
      if(rs.redirect) {
        location.href = rs.redirect;
      }
    });
  }

 $('.compere').click(function(){
	var value=$(this).val();
	if(value==1){
		$('.permission').hide();
		$('.commission').show();
	}else{
		$('.permission').show();
		$('.commission').hide();
	}
 });
 $('.commission_type').click(function(){
	var value=$(this).val();
	if(value=='AMOUNT'){
		$('.rate-title').html('主持人固定佣金：');
		$('.rate-desc').html('主持人固定佣金');
	}else{
		$('.rate-title').html('主持人佣金比例：');
		$('.rate-desc').html('佣金比例请填写小于100的正数,例如填写10,那么分佣比例就为10%');
	}
 });

</script>
