<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
    <h4 class="modal-title" id="myModalLabel">宣传基金使用记录删除</h4>
</div>
<form action="<{url action=topshop_ctl_offline_ads@dodel}>" method="post" class="bg-white" role="form" id="cancel_form" data-validate-onsuccess="ajaxSubmit">
    <div class="modal-body">
        记录删除后无法恢复，确认删除该条宣传基金使用记录？！
        <input type="hidden" name="ads_expense_id" value="<{$ads_expense_id}>"/>
        <input type="hidden" name="supplier_id" value="<{$supplier_id}>"/>
    </div>
    <div class="modal-footer text-center">
        <button type="submit" class="btn btn-primary">确认删除</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">取消删除</button>
    </div>
</form>


<script>
    $('#cancel_form').Validator({
        icons: {
            valid:      'icon icon-checkmark-a',
            invalid:    'icon icon-alert',
            validating: 'icon icon-loading-c'
        }
    });

    function ajaxSubmit (e) {
        var form = e.target;
        e.preventDefault();
        $.post(form.action, $(form).serialize(), function(rs) {
            if(rs.error) {
                $('#messagebox').message(rs.message);
                return;
            }
            if(rs.success) {
                $('#messagebox').message(rs.message, 'success');
            }
            if(rs.redirect) {
                location.href = rs.redirect;
            }
        });
    }
</script>
